<div id="messageBoard"></div>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.css">
<script src="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js"></script>
<script>
    const gitalk = new Gitalk({
  clientID: "<%- config.messageBoard.oauth.client_id %>",
  clientSecret: "<%- config.messageBoard.oauth.client_secret %>",
  repo: "<%- config.messageBoard.repo %>",     // The repository of store comments,
  owner: "<%- config.messageBoard.owner %>",
  admin: ['<%- config.messageBoard.owner %>'],
  //id: location.pathname,      // Ensure uniqueness and length less than 50
  id: hash(location.pathname),
  distractionFreeMode: false  // Facebook-like distraction free mode
})

gitalk.render('messageBoard');


/* hash */
function hash(input) {
var I64BIT_TABLE =
    'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789_-'.split('');
    var hash = 5381;
    var i = input.length - 1;
    if (typeof input == 'string') {
        for (; i > -1; i--)
            hash += (hash << 5) + input.charCodeAt(i);
    } else {
        for (; i > -1; i--)
            hash += (hash << 5) + input[i];
    }
    var value = hash & 0x7FFFFFFF;
    var retValue = '';
    do {
        retValue += I64BIT_TABLE[value & 0x3F];
    }
    while (value >>= 6);
    return retValue;
}

</script>
